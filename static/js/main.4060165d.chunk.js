(this.webpackJsonptest_task=this.webpackJsonptest_task||[]).push([[0],{159:function(e,t,a){e.exports={main:"App_main__YXBXY"}},189:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(51),c=a.n(r),i=(a(188),a(189),a(159)),l=a.n(i),d=a(23),j=a(178),o=a(43),u=a.n(o),b=a(2);function m(e){var t=e.sendUserData,a=Object(j.a)(),s=a.register,n=a.handleSubmit,r=(new Date).toISOString().split("T")[0];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:u.a.header,children:"New users "}),Object(b.jsxs)("form",{onSubmit:n((function(e){return t(e)})),className:u.a.form,children:[Object(b.jsxs)("label",{htmlFor:"dateRegister",className:u.a.label,children:["Date Registration:",Object(b.jsx)("input",Object(d.a)({id:"dateRegister",className:u.a.input,type:"date",max:r},s("dateRegister",{required:!0})))]}),Object(b.jsxs)("label",{htmlFor:"dateActive",className:u.a.label,children:["Date Last Activity:",Object(b.jsx)("input",Object(d.a)({id:"dateActive",className:u.a.input,type:"date",max:r},s("dateActive",{required:!0})))]}),Object(b.jsx)("button",{className:u.a.btn,children:"Send"})]})]})}var h=a(73),O=a.n(h);function g(e){var t=e.el;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("li",{className:O.a.li,children:[Object(b.jsx)("span",{className:O.a.element,children:t.id}),Object(b.jsx)("span",{className:O.a.element,children:t.data.dateRegister}),Object(b.jsx)("span",{className:O.a.element,children:t.data.dateActive})]})})}var p=a(48),x=a.n(p);function _(e){var t=e.users;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{className:x.a.lists,children:t.length>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("li",{className:x.a.elem,children:[Object(b.jsx)("span",{className:x.a.item,children:"ID USERS"}),Object(b.jsx)("span",{className:x.a.item,children:"DATE REGISTRATION"}),Object(b.jsx)("span",{className:x.a.item,children:"DATE LAST ACTIVITY"})]}),t.map((function(e){return Object(b.jsx)(g,{el:e},e.id)}))]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:x.a.nothing,children:"Missing data, please add new users"})})})})}var f=a(35),U=a(92),v=Object(U.b)({name:"defaultValues",initialState:{users:[],diagram:[],registeredUsers:0,realUser:0},reducers:{getUser:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{users:t.payload})},newUser:function(e,t){var a=e.users.length;e.users.push({id:a+1,data:t.payload})},getDiagram:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{diagram:t.payload})},getRegisteredUsers:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{registeredUsers:t.payload})},getRealUser:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{realUser:t.payload})}}}),N=v.actions,D=N.getUser,R=N.newUser,k=N.getDiagram,w=N.getRegisteredUsers,y=N.getRealUser,A=v.reducer,S=a(17),F=a(60),C=a.n(F),I=a(348),T=a(179),L=a(352),G=a(174),E=a(175),K=a(76),V=a(61),X=a.n(V);function Y(e){var t=e.data,a=e.numberDate,s=e.allUser,n=Math.round(s.realUser/s.registeredUsers*100)+"%";return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h2",{className:X.a.head,children:["Rolling Retention ",a," day: ",n," "]}),Object(b.jsxs)("div",{className:X.a.block,children:[Object(b.jsxs)("span",{className:X.a.el,children:["All users : ",s.registeredUsers]}),Object(b.jsxs)("span",{className:X.a.el,children:["Real users : ",s.realUser]}),Object(b.jsxs)("span",{className:X.a.el,children:["Days count : ",a]})]}),Object(b.jsxs)(I.a,{width:770,height:300,data:t,margin:{top:20,right:40,bottom:20,left:10},children:[Object(b.jsx)(T.a,{type:"monotone",dataKey:"User",stroke:"#8884d8"}),Object(b.jsx)(L.a,{stroke:"#ccc"}),Object(b.jsx)(G.a,{dataKey:"name"}),Object(b.jsx)(E.a,{}),Object(b.jsx)(K.a,{})]})]})}function q(e){var t=e.users,a=e.saveData,s=e.deleteData,n=Object(f.b)(),r=Object(f.c)((function(e){return e.default.diagram})),c=Object(f.c)((function(e){return e.default}));return Object(b.jsx)(b.Fragment,{children:t.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:C.a.block,children:[Object(b.jsx)("button",{className:C.a.btn,onClick:a,children:"Save"}),Object(b.jsx)("button",{className:C.a.btn,onClick:function(){for(var e=[],a=[],s=0;s<t.length;s++){var r=new Date,c=new Date(t[s].data.dateRegister),i=new Date(t[s].data.dateActive);r.setDate(r.getDate()-7),i>=r&&c>=r?e.push(t[s].data.dateActive):i<r&&c>=r&&(a.push(t[s]),console.log("Registration date is less than current date"))}var l=e.length+a.length;n(w(l)),n(y(e.length));var d=e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),j=Object.entries(d).map((function(e){var t=Object(S.a)(e,2);return{name:t[0],User:t[1]}}));j.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),n(k(j))},children:"Calculate"}),Object(b.jsx)("button",{className:C.a.btn,onClick:s,children:"Delete"})]}),Object(b.jsx)("div",{className:C.a.wrapper,children:r.length>0&&Object(b.jsx)(Y,{data:r,numberDate:7,allUser:c})})]})})}var B=a(176),M=a.n(B).a.create({baseURL:"https://p1antain.api.nomoredomains.club/",headers:{"Content-Type":"application/json"}}),Q=function(){return M.get("card")},W=function(e){return M.post("card",e)},J=function(){return M.delete("card")};var Z=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.default.users}));return n.a.useEffect((function(){t.length<=0&&Q().then((function(t){return e(D(t.data.data))}))}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:l.a.main,children:[Object(b.jsx)(m,{sendUserData:function(t){e(R(t))}}),Object(b.jsx)(_,{users:t}),Object(b.jsx)(q,{users:t,saveData:function(){W(t).then((function(){return console.log("Send completed")}))},deleteData:function(){J().then((function(){console.log("Deletion completed"),Q().then((function(t){return e(D(t.data.data))}))}))}})]})})},z=Object(U.a)({reducer:{default:A}});c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(f.a,{store:z,children:Object(b.jsx)(Z,{})})}),document.getElementById("root"))},43:function(e,t,a){e.exports={header:"CreateUser_header__2e1wX",form:"CreateUser_form__2bGcX",label:"CreateUser_label__2_6rx",input:"CreateUser_input__FcvLZ",btn:"CreateUser_btn__itDQG"}},48:function(e,t,a){e.exports={lists:"UserLists_lists__2xl1z",elem:"UserLists_elem__3D4m2",item:"UserLists_item__1nIiP",nothing:"UserLists_nothing__1VIDq"}},60:function(e,t,a){e.exports={block:"WorkingData_block__2soI0",btn:"WorkingData_btn__1R8YB",wrapper:"WorkingData_wrapper__1UVk9"}},61:function(e,t,a){e.exports={block:"RechartGraphics_block__3rh8G",el:"RechartGraphics_el__mQtNK",head:"RechartGraphics_head__aQ6Hv"}},73:function(e,t,a){e.exports={li:"User_li__2SjZi",element:"User_element__3Kxbc"}}},[[346,1,2]]]);
//# sourceMappingURL=main.4060165d.chunk.js.map